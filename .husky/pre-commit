#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ§¹ Styling, testing and building your project before committing..."

# Check Prettier
npm run check-format ||
(
    echo "âŒ Prettier Check Failed. Run: npm run format, add changes, and try commit again"
    false;
)

# Check ESLint
npm run check-lint ||
(
    echo "âŒ ESLint Check Failed. Fix the issues listed above, add changes, and try commit again"
    false;
)

# Check tsconfig
npm run check-types ||
(
    echo "âŒ Type check failed. Fix the issues listed above, add changes, and try commit again"
    false;
)

# Build
npm run build ||
(
    echo "âŒ Build failed. See errors above"
    false;
)

echo "âœ… Success! Ready to commit ğŸš€"

echo "ğŸ”„ Auto staging changes before commit..."
git add .